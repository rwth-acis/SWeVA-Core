{{# def.definitions }}
{{# def.setup:'allOf' }}
{{# def.setupNextLevel }}

{{~ $schema:$sch:$i }}
  {{? {{# def.nonEmptySchema:$sch }} }}
    {{
      $it.schema = $sch;
      $it.schemaPath = $schemaPath + '[' + $i + ']';
    }}

    {{= it.validate($it) }}

    {{? $breakOnError }}
      if (valid{{=$it.level}}) {
      {{ $closingBraces += '}'; }}
    {{?}}
  {{?}}
{{~}}

{{? $breakOnError }}
  {{= $closingBraces.slice(0,-1) }}
{{?}}

{{# def.cleanUp }}
